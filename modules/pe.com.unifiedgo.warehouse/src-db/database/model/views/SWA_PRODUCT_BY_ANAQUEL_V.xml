<?xml version="1.0"?>
  <database name="VIEW SWA_PRODUCT_BY_ANAQUEL_V">
    <view name="SWA_PRODUCT_BY_ANAQUEL_V"><![CDATA[SELECT a.swa_product_by_anaquel_v_id, a.ad_client_id, a.ad_org_id, a.isactive, a.created, a.createdby, a.updated, a.updatedby, a.m_product_id, a.m_warehouse_id, a.m_locator_id, COALESCE(a.qtyonhand - a.reserved, 0) AS qtyonhand, a.swa_product_warehouse_v_id, a.priorityno, a.reserved, a.totalqty, a.locatortype FROM (SELECT COALESCE(ml.m_locator_id, '-') || sd.m_storage_detail_id AS swa_product_by_anaquel_v_id, sd.ad_client_id, sd.ad_org_id, sd.isactive, sd.created, sd.createdby, sd.updated, sd.updatedby, sd.m_product_id, ml.m_warehouse_id, ml.m_locator_id, sd.qtyonhand, COALESCE((SELECT COALESCE(sum(rs.quantity - COALESCE(rs.releasedqty, 0)), 0) AS reserved FROM m_reservation_stock rs JOIN m_reservation r ON rs.m_reservation_id = r.m_reservation_id JOIN m_storage_detail sd_1 ON r.m_product_id = sd_1.m_product_id AND r.c_uom_id = sd_1.c_uom_id AND rs.m_locator_id = sd_1.m_locator_id WHERE (r.res_status NOT IN ('DR', 'CL')) AND r.m_product_id = sd.m_product_id AND rs.m_locator_id = ml.m_locator_id AND r.c_uom_id = prd.c_uom_id), 0) AS reserved, spwv.swa_product_warehouse_v_id, ml.priorityno, sd.qtyonhand AS totalqty, ml.em_obwhs_type AS locatortype FROM m_storage_detail sd JOIN m_locator ml ON sd.m_locator_id = ml.m_locator_id JOIN m_product prd ON sd.m_product_id = prd.m_product_id AND sd.c_uom_id = prd.c_uom_id JOIN swa_product_warehouse_v spwv ON ml.m_warehouse_id = spwv.m_warehouse_id AND sd.m_product_id = spwv.m_product_id) a]]></view>
  </database>
