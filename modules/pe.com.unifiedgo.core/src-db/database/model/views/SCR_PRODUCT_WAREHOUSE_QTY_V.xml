<?xml version="1.0"?>
  <database name="VIEW SCR_PRODUCT_WAREHOUSE_QTY_V">
    <view name="SCR_PRODUCT_WAREHOUSE_QTY_V"><![CDATA[SELECT (COALESCE(a.m_warehouse_id, '-') || COALESCE(a.m_product_id, '-')) || COALESCE(a.ad_org_id, '-') AS scr_product_warehouse_qty_v_id, a.m_product_id, a.m_warehouse_id, a.qtyonhand, a.qtyordered, a.qtyreserved, a.ad_client_id, a.ad_org_id, 'Y' AS isactive, now() AS updated, '100' AS updatedby, now() AS created, '100' AS createdby FROM (SELECT sd.m_product_id, sd.m_warehouse_id, sd.qtyonhand, COALESCE(s.qtyordered, 0) AS qtyordered, COALESCE(s.qtyreserved, 0) AS qtyreserved, sd.ad_client_id, sd.ad_org_id FROM (SELECT sdd.m_product_id, l.m_warehouse_id, sum(sdd.qtyonhand) AS qtyonhand, sdd.ad_client_id, l.ad_org_id FROM m_storage_detail sdd JOIN m_locator l ON sdd.m_locator_id = l.m_locator_id GROUP BY sdd.m_product_id, l.m_warehouse_id, sdd.ad_client_id, l.ad_org_id) sd LEFT JOIN (SELECT sp.m_product_id, sp.m_warehouse_id, sum(sp.qtyordered) AS qtyordered, sum(sp.qtyreserved) AS qtyreserved FROM m_storage_pending sp GROUP BY sp.m_product_id, sp.m_warehouse_id) s ON sd.m_product_id = s.m_product_id AND sd.m_warehouse_id = s.m_warehouse_id) a]]></view>
  </database>
