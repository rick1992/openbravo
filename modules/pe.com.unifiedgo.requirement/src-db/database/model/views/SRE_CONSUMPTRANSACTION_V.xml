<?xml version="1.0"?>
  <database name="VIEW SRE_CONSUMPTRANSACTION_V">
    <view name="SRE_CONSUMPTRANSACTION_V"><![CDATA[SELECT m_transaction.m_transaction_id AS sre_consumptransaction_v_id, m_transaction.ad_client_id, m_transaction.ad_org_id, m_transaction.isactive, m_transaction.created, m_transaction.createdby, m_transaction.updated, m_transaction.updatedby, m_transaction.movementtype, m_transaction.m_locator_id, m_transaction.m_product_id, m_transaction.movementdate, CASE WHEN (m_transaction.movementtype = 'swa_O-' OR m_transaction.movementtype = 'C-') AND (cmbi.value NOT IN ('boletadeventa', 'facturadeventa', 'FacturacionCliente', 'consumomina', 'consignacion', 'ventasujetacomprador', 'CompraextraordinariaentreEmpresasOut', 'ReposiciondecompraentreEmpresasOut', 'facturadeservicio')) THEN 0 ELSE m_transaction.movementqty END AS movementqty, m_transaction.m_inoutline_id, m_transaction.m_productionline_id, m_transaction.c_projectissue_id, m_transaction.m_attributesetinstance_id, m_transaction.m_product_uom_id, m_transaction.quantityorder, m_transaction.c_uom_id, m_transaction.m_internal_consumptionline_id, m_transaction.transactioncost, m_transaction.trxprocessdate, m_transaction.m_costing_algorithm_id, m_transaction.iscostcalculated, m_transaction.c_currency_id, m_transaction.costing_status, m_transaction.checkreservedqty, m_transaction.isprocessed, m_transaction.em_ssa_combo_item_id, m_transaction.em_swa_movcode_product_id FROM m_transaction, m_inoutline iol, m_inout io, scr_combo_item cmbi WHERE (m_transaction.movementtype IN ('swa_O-', 'C-')) AND m_transaction.isactive = 'Y' AND iol.m_inoutline_id = m_transaction.m_inoutline_id AND iol.m_inout_id = io.m_inout_id AND cmbi.scr_combo_item_id = io.em_swa_combo_item_id AND io.docstatus = 'CO' UNION ALL SELECT m_transaction.m_transaction_id AS sre_consumptransaction_v_id, m_transaction.ad_client_id, m_transaction.ad_org_id, m_transaction.isactive, m_transaction.created, m_transaction.createdby, m_transaction.updated, m_transaction.updatedby, m_transaction.movementtype, m_transaction.m_locator_id, m_transaction.m_product_id, m_transaction.movementdate, m_transaction.movementqty, m_transaction.m_inoutline_id, m_transaction.m_productionline_id, m_transaction.c_projectissue_id, m_transaction.m_attributesetinstance_id, m_transaction.m_product_uom_id, m_transaction.quantityorder, m_transaction.c_uom_id, m_transaction.m_internal_consumptionline_id, m_transaction.transactioncost, m_transaction.trxprocessdate, m_transaction.m_costing_algorithm_id, m_transaction.iscostcalculated, m_transaction.c_currency_id, m_transaction.costing_status, m_transaction.checkreservedqty, m_transaction.isprocessed, m_transaction.em_ssa_combo_item_id, m_transaction.em_swa_movcode_product_id FROM m_transaction, m_productionline pl, m_productionplan pp, m_production pr, scr_combo_item cmbi WHERE m_transaction.em_ssa_combo_item_id <> 'FA8999FE3EAF43E78FD26116B48E3C82' AND pl.m_productionline_id = m_transaction.m_productionline_id AND pl.m_productionplan_id = pp.m_productionplan_id AND pp.m_production_id = pr.m_production_id AND m_transaction.em_ssa_combo_item_id = cmbi.scr_combo_item_id AND pr.em_swa_desarmado = 'N' AND pr.processed = 'Y' AND cmbi.value = 'ArmadoOut' AND m_transaction.isactive = 'Y']]></view>
  </database>
