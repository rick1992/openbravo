<?xml version="1.0"?>
  <database name="VIEW SRE_PROD_PENDING_IMPORT_V">
    <view name="SRE_PROD_PENDING_IMPORT_V"><![CDATA[SELECT ol.m_product_id, o.c_order_id AS documentid, o.documentno, o.em_ssa_specialdoctype AS specialdoctype, CASE WHEN o.em_sim_folioimport_id IS NOT NULL THEN COALESCE((SELECT sfi.dateaproxwarehouse FROM sim_folioimport sfi WHERE sfi.sim_folioimport_id = o.em_sim_folioimport_id), o.datepromised) ELSE o.datepromised END AS datepromised, o.dateordered, ol.dateordered AS line_dateordered, o.ad_org_id AS order_org_id, w.ad_org_id AS warehouse_org_id, CASE WHEN o.issotrx = 'N' AND o.em_sim_is_import = 'Y' THEN ol.qtyordered - COALESCE(- ol.qtyreserved, 0) ELSE 0 END AS poqty, o.c_bpartner_id FROM c_orderline ol JOIN c_order o ON o.c_order_id = ol.c_order_id JOIN c_doctype dt ON o.c_doctypetarget_id = dt.c_doctype_id JOIN m_warehouse w ON ol.m_warehouse_id = w.m_warehouse_id WHERE o.docstatus = 'CO' AND o.processed = 'Y' AND o.em_sim_is_import = 'Y' AND dt.em_sco_specialdoctype = 'SIMPARTIAL' AND ol.qtyordered <> COALESCE(- ol.qtyreserved, 0) UNION ALL SELECT oil.m_product_id, oi.sim_orderimport_id AS documentid, oi.documentno, 'SIMORDERIMPORT' AS specialdoctype, oi.datepromised, oi.dateordered, oil.dateordered AS line_dateordered, oi.ad_org_id AS order_org_id, w.ad_org_id AS warehouse_org_id, COALESCE(oil.qtyreserved, 0) AS poqty, oi.c_bpartner_id FROM sim_orderimportline oil JOIN sim_orderimport oi ON oi.sim_orderimport_id = oil.sim_orderimport_id JOIN c_doctype dt ON oi.c_doctype_id = dt.c_doctype_id JOIN m_warehouse w ON oil.m_warehouse_id = w.m_warehouse_id WHERE oi.docstatus = 'CO' AND COALESCE(oil.qtyreserved, 0) <> 0]]></view>
  </database>
