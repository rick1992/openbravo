<?xml version="1.0"?>
  <database name="VIEW SPR_REQUISITIONTOORDER_V">
    <view name="SPR_REQUISITIONTOORDER_V"><![CDATA[SELECT (m_requisition.m_requisition_id || m_requisitionline.m_requisitionline_id) || m_requisitionline.m_product_id AS spr_requisitiontoorder_v_id, m_requisitionline.ad_client_id, m_requisitionline.ad_org_id, m_requisitionline.isactive, m_requisitionline.created, m_requisitionline.createdby, m_requisitionline.updated, m_requisitionline.updatedby, m_requisitionline.m_requisitionline_id, m_requisitionline.needbydate, m_requisitionline.qty, m_requisitionline.qty - m_requisitionline.orderedqty AS qtytoorder, c_uom1.name AS secuomname, c_uom.name AS uomname, m_requisitionline.m_product_id, m_requisition.ad_user_id, m_requisition.m_requisition_id, c_project.c_project_id FROM m_requisition JOIN m_requisitionline ON m_requisition.m_requisition_id = m_requisitionline.m_requisition_id JOIN ad_org ON m_requisition.ad_org_id = ad_org.ad_org_id JOIN c_project ON m_requisition.em_spr_project_id = c_project.c_project_id JOIN m_product ON m_product.m_product_id = m_requisitionline.m_product_id LEFT JOIN c_uom ON c_uom.c_uom_id = m_requisitionline.c_uom_id LEFT JOIN m_product_uom ON m_product_uom.m_product_uom_id = m_requisitionline.m_product_uom_id LEFT JOIN c_uom c_uom1 ON m_product_uom.c_uom_id = c_uom1.c_uom_id LEFT JOIN m_pricelist pl ON COALESCE(m_requisitionline.m_pricelist_id, m_requisition.m_pricelist_id) = pl.m_pricelist_id WHERE m_requisition.isactive = 'Y' AND m_requisitionline.isactive = 'Y' AND m_requisition.docstatus = 'CO' AND m_requisitionline.reqstatus = 'O' GROUP BY m_requisition.m_requisition_id, m_requisitionline.m_requisitionline_id, m_requisitionline.needbydate, m_requisitionline.qty, m_requisitionline.orderedqty, m_requisitionline.quantityorder, c_uom1.name, c_uom.name, pl.istaxincluded, m_requisitionline.gross_unit_price, m_requisitionline.priceactual, m_requisitionline.c_bpartner_id, m_requisition.c_bpartner_id, m_requisitionline.m_pricelist_id, m_requisition.m_pricelist_id, m_requisitionline.m_product_id, m_requisitionline.m_attributesetinstance_id, m_requisition.ad_user_id, m_product.em_swa_primary_partner_id, m_requisition.documentno, ad_org.name, m_requisition.created, c_project.c_project_id ORDER BY min(m_requisitionline.line), m_requisitionline.needbydate, m_requisitionline.m_product_id, m_requisitionline.m_attributesetinstance_id]]></view>
  </database>
